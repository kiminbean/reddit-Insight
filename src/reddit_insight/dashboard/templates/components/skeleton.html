{# Skeleton Loading Component Templates #}
{# Usage: {% include 'components/skeleton.html' %} #}

{# Basic skeleton line #}
{% macro skeleton_line(width='full', height='4') %}
<div class="skeleton h-{{ height }} w-{{ width }} rounded" aria-hidden="true"></div>
{% endmacro %}

{# Skeleton text block #}
{% macro skeleton_text(lines=3) %}
<div class="space-y-3" aria-hidden="true">
    {% for i in range(lines) %}
    <div class="skeleton h-4 rounded {% if loop.last %}w-3/4{% else %}w-full{% endif %}"></div>
    {% endfor %}
</div>
{% endmacro %}

{# Skeleton card - generic #}
{% macro skeleton_card() %}
<div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 space-y-4 animate-pulse" aria-hidden="true">
    <div class="flex items-center space-x-4">
        <div class="skeleton w-12 h-12 rounded-full"></div>
        <div class="flex-1 space-y-2">
            <div class="skeleton h-4 w-3/4 rounded"></div>
            <div class="skeleton h-3 w-1/2 rounded"></div>
        </div>
    </div>
    <div class="space-y-3">
        <div class="skeleton h-4 rounded"></div>
        <div class="skeleton h-4 w-5/6 rounded"></div>
        <div class="skeleton h-4 w-4/6 rounded"></div>
    </div>
</div>
{% endmacro %}

{# Skeleton stat card - for dashboard metrics #}
{% macro skeleton_stat_card() %}
<div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6" aria-hidden="true">
    <div class="space-y-3">
        <div class="skeleton h-4 w-1/2 rounded"></div>
        <div class="skeleton h-8 w-2/3 rounded"></div>
        <div class="flex items-center space-x-2">
            <div class="skeleton h-4 w-4 rounded"></div>
            <div class="skeleton h-3 w-1/3 rounded"></div>
        </div>
    </div>
</div>
{% endmacro %}

{# Skeleton chart card #}
{% macro skeleton_chart_card() %}
<div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6" aria-hidden="true">
    <div class="space-y-4">
        <div class="flex justify-between items-center">
            <div class="skeleton h-5 w-1/3 rounded"></div>
            <div class="skeleton h-4 w-1/4 rounded"></div>
        </div>
        <div class="skeleton h-64 w-full rounded"></div>
    </div>
</div>
{% endmacro %}

{# Skeleton table #}
{% macro skeleton_table(rows=5) %}
<div class="bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden" aria-hidden="true">
    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
        <div class="skeleton h-5 w-1/4 rounded"></div>
    </div>
    <div class="divide-y divide-gray-200 dark:divide-gray-700">
        {% for i in range(rows) %}
        <div class="px-6 py-4 flex items-center space-x-4">
            <div class="skeleton h-4 w-1/6 rounded"></div>
            <div class="skeleton h-4 w-1/3 rounded"></div>
            <div class="skeleton h-4 w-1/4 rounded"></div>
            <div class="skeleton h-4 w-1/6 rounded"></div>
        </div>
        {% endfor %}
    </div>
</div>
{% endmacro %}

{# Skeleton list item #}
{% macro skeleton_list_item() %}
<div class="flex items-center space-x-4 p-4" aria-hidden="true">
    <div class="skeleton w-10 h-10 rounded-lg"></div>
    <div class="flex-1 space-y-2">
        <div class="skeleton h-4 w-3/4 rounded"></div>
        <div class="skeleton h-3 w-1/2 rounded"></div>
    </div>
    <div class="skeleton h-6 w-16 rounded-full"></div>
</div>
{% endmacro %}

{# Skeleton list #}
{% macro skeleton_list(items=3) %}
<div class="bg-white dark:bg-gray-800 rounded-lg shadow divide-y divide-gray-200 dark:divide-gray-700" aria-hidden="true">
    {% for i in range(items) %}
    {{ skeleton_list_item() }}
    {% endfor %}
</div>
{% endmacro %}

{# Skeleton insight card - for insights page #}
{% macro skeleton_insight_card() %}
<div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 space-y-4" aria-hidden="true">
    <div class="flex justify-between items-start">
        <div class="flex items-center space-x-3">
            <div class="skeleton w-10 h-10 rounded-lg"></div>
            <div class="space-y-2">
                <div class="skeleton h-4 w-32 rounded"></div>
                <div class="skeleton h-3 w-24 rounded"></div>
            </div>
        </div>
        <div class="skeleton h-6 w-20 rounded-full"></div>
    </div>
    <div class="space-y-2">
        <div class="skeleton h-4 rounded"></div>
        <div class="skeleton h-4 w-5/6 rounded"></div>
    </div>
    <div class="flex items-center space-x-4 pt-2">
        <div class="skeleton h-8 w-24 rounded"></div>
        <div class="skeleton h-8 w-24 rounded"></div>
    </div>
</div>
{% endmacro %}

{# Skeleton demand card #}
{% macro skeleton_demand_card() %}
<div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 space-y-4" aria-hidden="true">
    <div class="flex items-start justify-between">
        <div class="space-y-2">
            <div class="skeleton h-5 w-48 rounded"></div>
            <div class="flex items-center space-x-2">
                <div class="skeleton h-4 w-4 rounded-full"></div>
                <div class="skeleton h-3 w-20 rounded"></div>
            </div>
        </div>
        <div class="skeleton h-8 w-16 rounded-lg"></div>
    </div>
    <div class="space-y-2">
        <div class="skeleton h-3 rounded"></div>
        <div class="skeleton h-3 w-4/5 rounded"></div>
    </div>
    <div class="flex flex-wrap gap-2 pt-2">
        <div class="skeleton h-6 w-16 rounded-full"></div>
        <div class="skeleton h-6 w-20 rounded-full"></div>
        <div class="skeleton h-6 w-14 rounded-full"></div>
    </div>
</div>
{% endmacro %}

{# Skeleton topic card #}
{% macro skeleton_topic_card() %}
<div class="bg-white dark:bg-gray-800 rounded-lg shadow p-5 space-y-3" aria-hidden="true">
    <div class="flex items-center justify-between">
        <div class="skeleton h-5 w-24 rounded"></div>
        <div class="skeleton h-6 w-12 rounded-full"></div>
    </div>
    <div class="flex flex-wrap gap-2">
        <div class="skeleton h-6 w-20 rounded-full"></div>
        <div class="skeleton h-6 w-16 rounded-full"></div>
        <div class="skeleton h-6 w-24 rounded-full"></div>
        <div class="skeleton h-6 w-18 rounded-full"></div>
    </div>
    <div class="pt-2">
        <div class="skeleton h-3 w-1/3 rounded"></div>
    </div>
</div>
{% endmacro %}

{# Skeleton grid - multiple cards #}
{% macro skeleton_grid(count=6, cols='3') %}
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-{{ cols }} gap-6" aria-busy="true" aria-label="Loading content">
    {% for i in range(count) %}
    {{ skeleton_card() }}
    {% endfor %}
</div>
{% endmacro %}

{# Full page skeleton for dashboard #}
{% macro skeleton_dashboard() %}
<div class="space-y-6" aria-busy="true" aria-label="Loading dashboard">
    {# Stats row #}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        {{ skeleton_stat_card() }}
        {{ skeleton_stat_card() }}
        {{ skeleton_stat_card() }}
        {{ skeleton_stat_card() }}
    </div>

    {# Chart and list row #}
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div class="lg:col-span-2">
            {{ skeleton_chart_card() }}
        </div>
        <div>
            {{ skeleton_list(4) }}
        </div>
    </div>

    {# Table #}
    {{ skeleton_table(5) }}
</div>
{% endmacro %}
