---
phase: 09-web-dashboard
plan: 01
type: execute
depends_on: ["08-03"]
files_modified: [src/reddit_insight/dashboard/__init__.py, src/reddit_insight/dashboard/app.py]
---

<objective>
대시보드 프레임워크를 설정한다.

Purpose: FastAPI 기반 웹 대시보드의 기본 구조 구축
Output: FastAPI 앱, 라우터, 정적 파일 서빙, 기본 레이아웃
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md

**Tech stack:**
- FastAPI: 웹 프레임워크
- Jinja2: 템플릿 엔진
- HTMX: 동적 UI (JavaScript 최소화)
- TailwindCSS (CDN): 스타일링

**Design principle:**
- 서버 사이드 렌더링 우선
- 최소한의 JavaScript
- 반응형 디자인
</context>

<tasks>

<task type="auto">
  <name>Task 1: FastAPI 앱 설정</name>
  <files>src/reddit_insight/dashboard/app.py, src/reddit_insight/dashboard/__init__.py</files>
  <action>
  src/reddit_insight/dashboard/ 패키지 생성:

  1. app.py에 FastAPI 앱 생성:
     - app = FastAPI(title="Reddit Insight Dashboard")
     - Jinja2Templates 설정
     - StaticFiles 마운트 (/static)

  2. 기본 라우트:
     - GET /: 메인 대시보드 (redirect to /dashboard)
     - GET /dashboard: 대시보드 홈
     - GET /health: 헬스체크

  3. __init__.py에 export:
     - app, create_app
  </action>
  <verify>
  - python -c "import sys; sys.path.insert(0, 'src'); from reddit_insight.dashboard import app; print('FastAPI app OK')"
  </verify>
  <done>
  - FastAPI 앱 생성
  - 기본 라우트 설정
  </done>
</task>

<task type="auto">
  <name>Task 2: 템플릿 및 정적 파일</name>
  <files>src/reddit_insight/dashboard/templates/base.html, src/reddit_insight/dashboard/static/</files>
  <action>
  1. templates/base.html 생성:
     - HTML5 기본 구조
     - TailwindCSS CDN 링크
     - HTMX CDN 링크
     - 네비게이션 바 (Trends, Demands, Competition, Insights)
     - 사이드바 레이아웃
     - 푸터

  2. templates/dashboard/home.html 생성:
     - base.html 상속
     - 요약 카드 4개 (트렌드, 수요, 경쟁, 인사이트)
     - 최근 분석 목록

  3. static/ 디렉토리 구조:
     - static/css/custom.css (추가 스타일)
     - static/js/app.js (최소 JS)
  </action>
  <verify>
  - ls src/reddit_insight/dashboard/templates/base.html
  - ls src/reddit_insight/dashboard/templates/dashboard/home.html
  </verify>
  <done>
  - 기본 템플릿 구조
  - 정적 파일 디렉토리
  </done>
</task>

<task type="auto">
  <name>Task 3: 라우터 구조</name>
  <files>src/reddit_insight/dashboard/routers/__init__.py</files>
  <action>
  src/reddit_insight/dashboard/routers/ 패키지 생성:

  1. routers/__init__.py:
     - 라우터 모듈 정의

  2. routers/dashboard.py:
     - router = APIRouter(prefix="/dashboard", tags=["dashboard"])
     - GET /dashboard/: 홈 페이지
     - GET /dashboard/summary: 요약 데이터 (HTMX partial)

  3. app.py에 라우터 등록:
     - app.include_router(dashboard_router)
  </action>
  <verify>
  - python -c "import sys; sys.path.insert(0, 'src'); from reddit_insight.dashboard.routers import dashboard; print('Dashboard router OK')"
  </verify>
  <done>
  - 라우터 구조 설정
  - 대시보드 라우터 구현
  </done>
</task>

<task type="auto">
  <name>Task 4: 데이터 서비스 연결</name>
  <files>src/reddit_insight/dashboard/services.py</files>
  <action>
  services.py 생성:

  1. DashboardService 클래스:
     - __init__(): 분석 모듈 초기화
     - get_summary() -> DashboardSummary: 요약 데이터
     - get_recent_analyses() -> list[AnalysisRecord]: 최근 분석

  2. DashboardSummary 데이터 클래스:
     - total_posts_analyzed: int
     - trending_keywords_count: int
     - demands_found: int
     - insights_generated: int

  3. AnalysisRecord 데이터 클래스:
     - id: str
     - subreddit: str
     - analyzed_at: datetime
     - post_count: int
     - insight_count: int
  </action>
  <verify>
  - python -c "import sys; sys.path.insert(0, 'src'); from reddit_insight.dashboard.services import DashboardService, DashboardSummary; print('DashboardService OK')"
  </verify>
  <done>
  - 데이터 서비스 구현
  - 요약 데이터 구조
  </done>
</task>

</tasks>

<verification>
- [ ] FastAPI 앱 실행 가능
- [ ] /dashboard 라우트 동작
- [ ] 템플릿 렌더링 동작
</verification>

<success_criteria>
- 모든 태스크 완료
- 대시보드 기본 프레임워크 동작
</success_criteria>

<output>
After completion, create `.planning/phases/09-web-dashboard/09-01-SUMMARY.md`
</output>
