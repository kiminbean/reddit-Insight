---
phase: 09-web-dashboard
plan: 02
type: execute
depends_on: ["09-01"]
files_modified: [src/reddit_insight/dashboard/routers/trends.py, src/reddit_insight/dashboard/templates/trends/]
---

<objective>
트렌드 시각화 컴포넌트를 구현한다.

Purpose: 키워드 트렌드를 시각적으로 표현하는 대시보드 뷰
Output: 트렌드 페이지, 키워드 차트, Rising 키워드 목록
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/09-web-dashboard/09-01-PLAN.md

**Prior plan context:**
- FastAPI 앱 설정됨
- Jinja2 템플릿 사용
- HTMX로 동적 업데이트

**Visualization approach:**
- Chart.js (CDN)로 차트 렌더링
- 서버에서 JSON 데이터 제공
- HTMX로 필터 적용
</context>

<tasks>

<task type="auto">
  <name>Task 1: 트렌드 라우터</name>
  <files>src/reddit_insight/dashboard/routers/trends.py</files>
  <action>
  routers/trends.py 생성:

  1. router = APIRouter(prefix="/trends", tags=["trends"])

  2. 라우트:
     - GET /trends/: 트렌드 메인 페이지
     - GET /trends/keywords: 키워드 목록 (HTMX partial)
     - GET /trends/rising: Rising 키워드 (HTMX partial)
     - GET /trends/chart-data: 차트 데이터 (JSON)

  3. 쿼리 파라미터:
     - subreddit: str | None
     - days: int = 7
     - limit: int = 20
  </action>
  <verify>
  - python -c "import sys; sys.path.insert(0, 'src'); from reddit_insight.dashboard.routers.trends import router; print('Trends router OK')"
  </verify>
  <done>
  - 트렌드 라우터 구현
  </done>
</task>

<task type="auto">
  <name>Task 2: 트렌드 서비스</name>
  <files>src/reddit_insight/dashboard/services/trend_service.py</files>
  <action>
  services/trend_service.py 생성:

  1. TrendService 클래스:
     - get_top_keywords(
         subreddit: str | None,
         days: int,
         limit: int
       ) -> list[KeywordTrend]

     - get_rising_keywords(
         subreddit: str | None,
         limit: int
       ) -> list[RisingKeyword]

     - get_keyword_timeline(
         keyword: str,
         days: int
       ) -> list[TimelinePoint]

  2. KeywordTrend 데이터 클래스:
     - keyword: str
     - frequency: int
     - trend_direction: str (up/down/stable)
     - change_percent: float

  3. RisingKeyword 데이터 클래스:
     - keyword: str
     - rising_score: float
     - first_seen: datetime | None
     - growth_rate: float

  4. TimelinePoint 데이터 클래스:
     - date: date
     - count: int
  </action>
  <verify>
  - python -c "import sys; sys.path.insert(0, 'src'); from reddit_insight.dashboard.services.trend_service import TrendService; print('TrendService OK')"
  </verify>
  <done>
  - 트렌드 서비스 구현
  </done>
</task>

<task type="auto">
  <name>Task 3: 트렌드 템플릿</name>
  <files>src/reddit_insight/dashboard/templates/trends/</files>
  <action>
  templates/trends/ 디렉토리 생성:

  1. trends/index.html:
     - 트렌드 메인 페이지
     - 필터 폼 (subreddit, 기간)
     - 키워드 차트 영역
     - Rising 키워드 테이블

  2. trends/partials/keyword_list.html:
     - 키워드 목록 partial (HTMX)
     - 순위, 키워드, 빈도, 변화율

  3. trends/partials/rising_list.html:
     - Rising 키워드 partial (HTMX)
     - Rising Score 바 표시

  4. Chart.js 통합:
     - 시계열 라인 차트
     - 키워드 빈도 바 차트
  </action>
  <verify>
  - ls src/reddit_insight/dashboard/templates/trends/index.html
  </verify>
  <done>
  - 트렌드 템플릿 구현
  - Chart.js 통합
  </done>
</task>

<task type="auto">
  <name>Task 4: 앱에 라우터 등록</name>
  <files>src/reddit_insight/dashboard/app.py</files>
  <action>
  1. app.py 업데이트:
     - from .routers import trends
     - app.include_router(trends.router)

  2. 네비게이션 업데이트:
     - base.html에 Trends 링크 활성화

  3. 통합 테스트:
     - /trends/ 접근 확인
  </action>
  <verify>
  - python -c "import sys; sys.path.insert(0, 'src'); from reddit_insight.dashboard.app import app; routes = [r.path for r in app.routes]; print('/trends' in str(routes) or 'trends' in str(routes))"
  </verify>
  <done>
  - 트렌드 라우터 등록
  - 네비게이션 연결
  </done>
</task>

</tasks>

<verification>
- [ ] /trends/ 페이지 렌더링
- [ ] 키워드 차트 데이터 제공
- [ ] Rising 키워드 목록 표시
</verification>

<success_criteria>
- 모든 태스크 완료
- 트렌드 시각화 동작
</success_criteria>

<output>
After completion, create `.planning/phases/09-web-dashboard/09-02-SUMMARY.md`
</output>
