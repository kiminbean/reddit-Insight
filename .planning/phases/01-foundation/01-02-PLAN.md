---
phase: 01-foundation
plan: 02
type: execute
depends_on: ["01-01"]
files_modified: [src/reddit_insight/config.py, src/reddit_insight/logging.py, .env.example]
---

<objective>
설정 관리 및 로깅 시스템을 구축한다.

Purpose: 환경별 설정 관리와 일관된 로깅으로 개발/운영 편의성 확보
Output: pydantic-settings 기반 Config 클래스, 구조화된 로깅 시스템
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-01-SUMMARY.md

**Prior phase context:**
- pyproject.toml에 pydantic, pydantic-settings, rich 의존성 정의됨
- src/reddit_insight/ 패키지 구조 생성됨

**Constraints:**
- 무료 도구만 사용 (유료 API 키는 v1에서 제외)
- 로컬 개발 환경 우선
</context>

<tasks>

<task type="auto">
  <name>Task 1: Config 모듈 생성 (pydantic-settings 기반)</name>
  <files>src/reddit_insight/config.py, .env.example</files>
  <action>
  1. src/reddit_insight/config.py 생성:
     - pydantic_settings.BaseSettings 상속한 Settings 클래스
     - 환경변수 prefix: "REDDIT_INSIGHT_"
     - 설정 항목:
       - app_name: str = "Reddit Insight"
       - debug: bool = False
       - log_level: str = "INFO"
       - data_dir: Path = Path("./data")
       - reddit_client_id: str | None = None (Phase 2에서 사용)
       - reddit_client_secret: str | None = None
       - database_url: str = "sqlite:///./data/reddit_insight.db"
     - model_config에 env_file=".env" 설정
     - get_settings() 함수: lru_cache로 싱글톤 패턴

  2. .env.example 생성:
     - 모든 환경변수 주석과 함께 나열
     - 민감한 값은 placeholder로

  주의: .env 파일은 .gitignore에 포함되어 있어야 함 (01-01에서 설정됨)
  실제 .env 파일은 생성하지 않음 - 사용자가 .env.example 복사해서 사용
  </action>
  <verify>
  - python -c "import sys; sys.path.insert(0, 'src'); from reddit_insight.config import get_settings; s = get_settings(); print(s.app_name)"
  - cat .env.example | head -10
  </verify>
  <done>
  - Settings 클래스가 환경변수에서 설정을 로드함
  - .env.example에 모든 설정 항목이 문서화됨
  - get_settings()가 캐시된 인스턴스 반환
  </done>
</task>

<task type="auto">
  <name>Task 2: 로깅 시스템 설정</name>
  <files>src/reddit_insight/logging.py, src/reddit_insight/__init__.py</files>
  <action>
  1. src/reddit_insight/logging.py 생성:
     - rich.logging.RichHandler 사용한 포맷팅
     - setup_logging(level: str = "INFO") 함수:
       - root logger 설정
       - format: "[%(name)s] %(message)s"
       - DEBUG 레벨에서는 시간 표시
     - get_logger(name: str) 함수: 모듈별 로거 반환

  2. src/reddit_insight/__init__.py 수정:
     - setup_logging, get_logger를 패키지 레벨에서 export
     - __all__ 정의

  주의:
  - 파일 로깅은 Phase 10에서 추가 (현재는 콘솔만)
  - RichHandler는 터미널에서만 동작하므로 is_terminal 체크 필요
  </action>
  <verify>
  - python -c "import sys; sys.path.insert(0, 'src'); from reddit_insight import setup_logging, get_logger; setup_logging('DEBUG'); logger = get_logger('test'); logger.info('Hello')"
  </verify>
  <done>
  - setup_logging()이 로그 레벨 설정 가능
  - get_logger()가 명명된 로거 반환
  - rich 포맷팅이 터미널에서 적용됨
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Config가 환경변수에서 로드 가능
- [ ] .env.example이 모든 설정 문서화
- [ ] 로깅이 정상 동작
- [ ] 패키지 import가 깔끔함 (`from reddit_insight import get_settings, get_logger`)
</verification>

<success_criteria>

- 모든 태스크 완료
- 설정 시스템 동작 확인
- 로깅 시스템 동작 확인
- Phase 1 완료 상태
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
